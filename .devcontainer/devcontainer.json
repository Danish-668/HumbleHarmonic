{
    "name": "ROS 2 Humble + Gazebo Harmonic + gz_ros2_control",
    "build": {
        "dockerfile": "Dockerfile",
        "context": ".",
        "args": {
            "BASE_IMAGE": "ros-humble-gz-base:latest",
            "WORKSPACE_PATH": "/workspace/humble_harmonic",
            "GZ_ROS2_CONTROL_WS": "/opt/gz_ros2_control_ws",
            "INSTALL_DEV_TOOLS": "false",
            "INSTALL_CLAUDE": "false",
            "INSTALL_TELEOP": "true",
            "INSTALL_TEST_TOOLS": "false",
            "ENABLE_GPU_SUPPORT": "true",
            "ROS_DOMAIN_ID": "0",
            "ROS_LOCALHOST_ONLY": "0"
        }
    },

    "workspaceFolder": "/workspace/humble_harmonic",
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspace/humble_harmonic,type=bind",

    "runArgs": [
        "--network=host",
        "--privileged",
        "--ipc=host",
        "--pid=host",
        "--gpus=all"
    ],

    "containerEnv": {
        "DISPLAY": "${localEnv:DISPLAY}",
        "GZ_VERSION": "harmonic",
        "NVIDIA_VISIBLE_DEVICES": "all",
        "NVIDIA_DRIVER_CAPABILITIES": "all",
        "__GLX_VENDOR_LIBRARY_NAME": "nvidia",
        "LIBGL_ALWAYS_SOFTWARE": "0"
    },

    "mounts": [
        "source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind,consistency=cached",
        "source=/dev/dri,target=/dev/dri,type=bind",
        "source=claude-config,target=/root/.config/claude,type=volume"
    ],

    "postCreateCommand": "sudo apt-get update && echo 'DevContainer setup complete - ROS2 Humble + Gazebo Harmonic + gz_ros2_control ready!'",

    "postStartCommand": "touch ~/.Xauthority && xhost +local:root 2>/dev/null || true",

    "remoteUser": "root"
}